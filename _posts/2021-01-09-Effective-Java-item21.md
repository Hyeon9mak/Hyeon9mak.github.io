---
title: "[Effective-Java] μ•„μ΄ν… 21. μΈν„°νμ΄μ¤λ” κµ¬ν„ν•λ” μ½μ„ μƒκ°ν•΄ μ„¤κ³„ν•λΌ"
date: 2021-01-09
tags:
    - μ΄ν™ν‹°λΈμλ°”
    - effective-java
    - Java
    - μλ°”
toc: true
toc_sticky: true
toc_label: "μ•„μ΄ν… 21. μΈν„°νμ΄μ¤λ” κµ¬ν„ν•λ” μ½μ„ μƒκ°ν•΄ μ„¤κ³„ν•λΌ"
---

μ „μ²΄μ μΈ μ¤ν„°λ”” λ‚΄μ©μ€ [JunHyeok96/effective-java](https://github.com/JunHyeok96/effective-java)μ—μ„ ν™•μΈ κ°€λ¥! 
{: .notice}

## π” μΈν„°νμ΄μ¤μ™€ default λ©”μ„λ“
> "μλ°” 8 μ΄μ „μ—λ” κΈ°μ΅΄ κµ¬ν„μ²΄λ¥Ό κΉ¨λ¨λ¦¬μ§€ μ•κ³ λ” μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  λ°©λ²•μ΄ μ—†μ—λ‹¤. 
> μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ©΄ λ³΄ν†µμ€ μ»΄νμΌ μ¤λ¥κ°€ λ‚λ”λ°, μ¶”κ°€λ λ©”μ„λ“κ°€ μ°μ—°ν κΈ°μ΅΄ κµ¬ν„μ²΄μ— μ΄λ―Έ μ΅΄μ¬ν•  κ°€λ¥μ„±μ΄ μ•„μ£Ό λ‚®κΈ° λ•λ¬Έμ΄λ‹¤.
> μλ°” 8μ— λ“¤μ–΄μ„ κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  μ μλ„λ΅ default λ©”μ„λ“λ¥Ό μ†κ°ν–μ§€λ§, μ„ν—μ΄ μ™„μ „ν μ‚¬λΌμ§„ κ²ƒμ€ μ•„λ‹λ‹¤."

κ°‘μκΈ° `default` λ©”μ„λ“λ¥Ό μ†κ°ν•κ³ , κ°‘μκΈ° `default` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ§€ λ§λΌλ” λ“― μ΄μ•ΌκΈ° ν•λ‹¤. 
μ±…μ λ‚΄μ©μ„ λ” μ μ΄ν•΄ν•κΈ° μ„ν•΄ μ°μ„  μΈν„°νμ΄μ¤μ™€ `default` λ©”μ„λ“λ¥Ό μμ‹μ™€ ν•¨κ» κ°„λ‹¨ν μ•μ•„λ³΄μ.

<br>

### μΈν„°νμ΄μ¤(interface)
μΈν„°νμ΄μ¤λ€ μƒμ(static final)μ™€ μ¶”μƒ λ©”μ„λ“(abstract method)μ μ§‘ν•©μ΄λ‹¤. 
μƒμ„±μλ¥Ό κ°€μ§ μ μ—†λ‹¤. (λ”°λΌμ„ κ°μ²΄ν™”κ°€ λ¶κ°€λ¥ ν•λ‹¤.) 
μΈν„°νμ΄μ¤μ— μ„ μ–Έλ μƒμμ™€ μ¶”μƒ λ©”μ„λ“λ” public static final κ³Ό public abstract ν‚¤μ›λ“λ¥Ό 
μ»΄νμΌ νƒ€μ„μ— μλ™μΌλ΅ μƒμ„±ν•΄μ£ΌκΈ° λ•λ¬Έμ— μƒλµμ΄ κ°€λ¥ν•λ‹¤. 
μΈν„°νμ΄μ¤λ” λ‹¤μ¤‘μƒμ†μ„ μ§€μ›ν•λ©°, ν•λ‚μ κµ¬ν„μ²΄μ—μ„ μ—¬λ¬κ°μ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•  μ μλ‹¤. 
'κµ¬ν„μ²΄'λ€ **μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ κµ¬ν„ν• ν΄λμ¤**λ¥Ό μλ―Έν•λ‹¤. λ‹¤λ¥Έ μ΄λ¦„μΌλ΅λ” **κµ¬ν„ ν΄λμ¤**, **μ‹¤μ²΄ ν΄λμ¤** λΌκ³  λ¶λ¦°λ‹¤. 

### default λ©”μ„λ“
μΈν„°νμ΄μ¤λ” λ©”μ„λ“μ— λ€ν• μ„ μ–Έλ§ κ°€λ¥ν•κΈ° λ•λ¬Έμ—, μ‹¤μ  λ΅μ§μ€ ν¬ν•¨λ  μ μ—†λ‹¤. 
ν•μ§€λ§ μλ°”8μ—μ„ μ΄λ¬ν• λ£°μ„ κΉ¨νΈλ¦¬λ” κΈ°λ¥μ΄ λ“±μ¥ν•λ”λ°, κ·Έκ²ƒμ΄ `default` λ©”μ„λ“λ‹¤. 
λ©”μ†λ“ μ„ μ–Έμ‹ `default`λ¥Ό λ…μ‹ν•κ² λλ©΄ μΈν„°νμ΄μ¤ λ‚΄λ¶€μ—μ„λ„ λ™μ‘ μ½”λ“κ°€ ν¬ν•¨λ λ©”μ„λ“λ¥Ό μ„ μ–Έ ν•  μ μλ‹¤.

```java
interface JavaStudyable {  // ~able λ„¤μ΄λ° κ·μΉ™μ„ κ°€μ§„λ‹¤.
 
    public abstarct void study();   // μΌλ°μ μΈ λ©”μ„λ“ μ„ μ–Έ

    public default void rest() {    // default λ©”μ„λ“ μ„ μ–Έ ν›„ κµ¬ν„
        System.out.println("μ‰½μ‹λ‹¤!");
    }

}
```

### default λ©”μ„λ“ μ‚¬μ© μμ‹
```java
// Test 1
interface DefaultTestable {

    public abstract void study();

    public abstract void rest();

}

class RealTest implements DefaultTestable { // μ»΄νμΌ μ—λ¬!

    @Override
    public void study() {
        System.out.println("κ³µλ¶€ν•©μ‹λ‹¤.");
    }

}
```
`DefaultTestable` μΈν„°νμ΄μ¤μ—  `rest()` λ©”μ„λ“κ°€ κµ¬ν„λμ§€ μ•μ•„ μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•λ‹¤.

```java
// Test 2
interface DefaultTestable {

    public abstract void study();

    public default void rest(){
        System.out.println("μ‰½μ‹λ‹¤.");
    }

}

class RealTest implements DefaultTestable {

    @Override
    public void study() {
        System.out.println("κ³µλ¶€ν•©μ‹λ‹¤.");
    }

}
```
```
κ³µλ¶€ν•©μ‹λ‹¤.
μ‰½μ‹λ‹¤.
```
`default` ν‚¤μ›λ“λ¥Ό ν†µν•΄ κµ¬ν„λ λ©”μ„λ“κ°€ `RealTest` κ°μ²΄λ¥Ό ν†µν•΄ μ •μƒ λ™μ‘ν•λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

```java
// Test 3
interface DefaultTestable {

    public abstract void study();

    public default void rest(){
        System.out.println("μ‰½μ‹λ‹¤.");
    }

}

class RealTest implements DefaultTestable {

    @Override
    public void study() {
        System.out.println("κ³µλ¶€ν•©μ‹λ‹¤.");
    }

    @Override
    public void rest() {
        System.out.println("ν•  κ±΄ ν•κ³  μ‰¬μ–΄μ•Όμ£ .");
    }
}
```
```
κ³µλ¶€ν•©μ‹λ‹¤.
ν•  κ±΄ ν•κ³  μ‰¬μ–΄μ•Όμ£ .
```
λ‹Ήμ—°ν μ¤λ²„λΌμ΄λ”©λ„ κ°€λ¥ν•λ‹¤.

<br>

`default` ν‚¤μ›λ“λ” μΈν„°νμ΄μ¤μ— λ©”μ„λ“λ¥Ό μ¶”κ°€ν•¨κ³Ό λ™μ‹μ— ν•μ„νΈν™μ„±μ„ μ μ§€ν•  μ μλ„λ΅ ν•΄μ£Όλ” ν° νΈμλ¥Ό μ κ³µν•΄μ¤€λ‹¤. 
κ·Έλ¬λ‚ μ±…μ—μ„λ” `default` ν‚¤μ›λ“ μ‚¬μ©μ„ μμ ν•λΌλ” λ“― μ΄μ•ΌκΈ° ν•κ³  μλ‹¤. κ·Έ μ΄μ λ¥Ό μ‚΄ν΄λ³΄μ.

<br>

## π” κµ¬ν„μ²΄λ“¤μ€ default λ©”μ„λ“ μ¶”κ°€ μ‚¬μ‹¤μ„ λ¨λ¥Έλ‹¤
μ„μ—μ„ μ‚΄ν΄λ³Έ μ—μ‹μ™€ κ°™μ΄, `default` λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ©΄ κ·Έ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• λ¨λ“  κµ¬ν„μ²΄λ“¤μ€ 
ν•΄λ‹Ή `default` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  μ μκ² λλ‹¤. (μ¤λ²„λΌμ΄λ”©μ„ ν•λ, μ•ν•λ) 
λ‹¨, κµ¬ν„μ²΄λ“¤μ΄ `default` λ©”μ„λ“κ°€ μ¶”κ°€λλ”μ§€ μ•μ•„μ°¨λ¦¬μ§€ λ»ν•λ” μ±„λ΅ λ¬΄μ‘μ • μ¶”κ°€λλ‹¤. 
μλ°” 7κΉμ§€λ” λ¨λ“  ν΄λμ¤κ°€ "ν„μ¬μ μΈν„°νμ΄μ¤μ— μƒλ΅μ΄ λ©”μ„λ“κ°€ μ¶”κ°€λ  μΌμ€ μμ›ν μ—†λ‹¤" λΌκ³  κ°€μ •ν• λ’¤ μ‘μ„± λμ—κΈ° λ•λ¬Έμ΄λ‹¤.

<br>

## π” λ¨λ“  μƒν™©μ—μ„ λ¶λ³€μ‹μ„ ν•΄μΉμ§€ μ•κΈ°λ€ μ–΄λ µλ‹¤  
μλ°” 8μ—μ„λ” ν•µμ‹¬ μ»¬λ ‰μ… μΈν„°νμ΄μ¤λ“¤μ— λ‹¤μμ default λ©”μ„λ“λ¥Ό μ¶”κ°€ν–λ‹¤. μ£Όλ΅ `Lambda`λ¥Ό ν™μ©ν•κΈ° μ„ν•΄μ„λ‹¤. 
μλ°” λΌμ΄λΈλ¬λ¦¬μ— λ“±λ΅λ `default` λ©”μ„λ“λ“¤μ€ μ½”λ“ ν’μ§μ΄ λ†’κ³  λ²”μ©μ μ΄λΌ λ€λ¶€λ¶„μ μƒν™©μ—μ„ μ •μƒμ μΌλ΅ μ‘λ™ν•λ‹¤. 
κ·Έλ¬λ‚ λ§ κ·Έλ€λ΅ λ€λ¶€λ¶„μ μƒν™©μ—μ„μ§€, **λ¨λ“  μƒν™©μ—μ„ λ¶λ³€μ‹μ„ μ§€ν‚¤μ§„ λ»ν•λ‹¤**. 
(λ¶λ³€μ‹μ μ¤‘μ”μ„±μ€ [μ•„μ΄ν… 17](https://hyeon9mak.github.io/effective-java/Effective-Java-item17/) μ„ μ°Έκ³ ν•μ.)  
  
μλ°” 8μ `Collection` μΈν„°νμ΄μ¤μ— μ¶”κ°€λ `removeIf` λ©”μ„λ“λ¥Ό μμ‹λ΅ λ³΄μ.

```java
// Predicate -> λ§¤κ°κ°’μ„ μ‚¬μ©ν•΄ μ΅°μ‚¬(μ΅°κ±΄) ν›„ λ…Όλ¦¬κ°’(true, false)μ„ λ°ν™ν•λ‹¤.
default boolean removeIf(Predicate<? super E> filter) {
	Objects.requireNonNull(filter);
	boolean removed = false;
	for (Iterator<E> it = iterator(); it.hasNext(); ) {
        if (filter.test(it.next())) {
            it.remove();
            result = true;
        }
    }
	return result;
}
```

μ΄ λ©”μ„λ“λ” `Collection`μ„ κµ¬ν„ν• ν΄λμ¤μ μ›μ† λ¬¶μ(`List`, `Set` λ“±)μ—μ„ 
`iterator`λ¥Ό μ΄μ©ν•΄ μ›μ† λ¬¶μμ„ μνν•λ©΄μ„ `boolean` ν•¨μκ°€ `true`λ¥Ό λ°ν™ν•λ” λ¨λ“  μ›μ†λ¥Ό μ κ±°ν•λ‹¤.  
  
`Collection`μ„ κµ¬ν„ν• λ€λ¶€λ¶„μ ν΄λμ¤μ—μ„ μ λμ•„κ°€λ” λ²”μ©μ μΈ λ©”μ„λ“μ§€λ§, 
λ¨λ“  κµ¬ν„μ²΄μ—μ„ `removeIf` λ©”μ„λ“λ¥Ό μ μ†ν™”ν•λ” κ²ƒμ€ μ•„λ‹λ‹¤. κ·Έ λ€ν‘μ μΈ μκ°€ 4.3 μ΄ν• λ²„μ „μ 
`org.apache.commons.collections4.collection.SynchronizedCollection` μ΄λ‹¤. 
ν΄λΌμ΄μ–ΈνΈκ°€ μ κ³µν• κ°μ²΄μ— `lock`μ„ κ±°λ” λ¥λ ¥μ„ μ¶”κ°€ν•μ—¬ μ¤λ λ“κ°„ λ™κΈ°ν™”λ¥Ό λ³΄μ¥ν•λ” ν΄λμ¤λ‹¤. κ·Έλ¬λ‚ 
4.3 μ΄ν• λ²„μ „μ `SynchronizedCollection` μ—μ„λ” `removeIf`κ°€ μ¤λ²„λΌμ΄λ”© λμ§€ μ•μ•„ 
`default` λ©”μ„λ“μ ν•νƒλ΅ κ³§μ¥ μ‚¬μ©λμ–΄ λ™κΈ°ν™”κ°€ μ§€μΌμ§€μ§€ μ•λ”λ‹¤. 
(μ •ν™•ν• μ‹¤ν— λ‚΄μ©μ€ [sejoung λ‹μ μ•„μ΄ν… 21 ν¬μ¤νΈ](https://sejoung.github.io/2018/12/2018-12-17-Design_interfaces_for_posterity/#%EC%95%84%EC%9D%B4%ED%85%9C-21-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A5%BC-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EC%AA%BD%EC%9D%84-%EC%83%9D%EA%B0%81%ED%95%B4-%EC%84%A4%EA%B3%84%ED%95%98%EB%9D%BC) λ¥Ό μ°Έκ³ ν•μ.) 
λ”°λΌμ„ `SynchronizedCollection` μΈμ¤ν„΄μ¤λ¥Ό μ—¬λ¬ μ¤λ λ“κ°€ κ³µμ ν•λ” ν™κ²½μ—μ„ `removeIf` λ©”μ„λ“κ°€ νΈμ¶λλ©΄ 
`ConcurrentModificationException`μ΄ λ°μƒν•κ±°λ‚, λ‹¤λ¥Έ μλ»λ κ²°κ³Όλ¥Ό λ°ν™ν•  μ μλ‹¤. μμ‹ μ λ³Έλ¶„μ„ μ§€ν‚¤μ§€ λ»ν•κ² λλ” κ²ƒμ΄λ‹¤.  
  
μλ°” λΌμ΄λΈλ¬λ¦¬ ν”λ«νΌμ—μ„λ„ μ΄λ¬ν• μ‚¬νƒλ¥Ό μΈμ§€ν•κ³  μ•„λμ™€ κ°™μ€ μ΅°μΉλ¥Ό μ·¨ν–λ‹¤.  

```java
// SynchronizedCollection in Collections

// Override default methods in Collection
@Override
public boolean removeIf(Predicate<? super E> filter) {
    synchronized (mutex) {return c.removeIf(filter);}
}
```

`default` λ©”μ„λ“λ¥Ό νΈμ¶ν•κΈ° μ „μ— μ‚¬μ „μ‘μ—…(`synchronized`)μ„ ν†µν•΄ μ–΄μ°λ¬μ§€λ„λ΅ ν•λ” κ²ƒμ΄λ‹¤. 
μ΄ λ•λ¶„μ— `SynchronizedCollection` μ€ 4.4 μ΄μƒ λ²„μ „λ¶€ν„° `removeIf` λ©”μ„λ“λ¥Ό μμ—°μ¤λ½κ² μ‚¬μ©ν•  μ μκ² λμ—λ‹¤.  
  
κ·Έλ¬λ‚ μ΄κ²ƒμ€ μλ°” ν”λ«νΌ λΌμ΄λΈλ¬λ¦¬μ— μ†ν•λ” ν΄λμ¤λ“¤λ§ λ„λ¦΄ μ μλ” ννƒμ΄λ©°, 
μ†ν•μ§€ λ»ν• μ 3μ κΈ°μ΅΄ `Collection` κµ¬ν„μ²΄λ“¤μ€ μΈν„°νμ΄μ¤ λ³€ν™”μ— λ°λ§μ¶° μμ •λ  κΈ°νκ°€ μ—†μ—λ‹¤. 
λ•λ¬Έμ— μΌλ¶€λ” μ•„μ§λ„ μμ •λμ§€ μ•κ³  μλ‹¤.

<br>

## π” λ¬Έμ μ μ΄ λ°νƒ€μ„μ—μ„μ•Ό λ°κ²¬ λ  μλ„ μλ‹¤
`default` λ©”μ„λ“μ λ¬Έμ μ μ€ μ»΄νμΌ νƒ€μ„μ„ μ§€λ‚ λ°νƒ€μ„μ— λ“¤μ–΄μ„μ•Ό λ°κ²¬ λ  μλ„ μλ‹¤. (νΉνλ‚ λ™κΈ°ν™” κ΄€λ ¨λ λ¬Έμ μ—μ„) 
μλ°” 8μ—μ„ `Collection` μΈν„°νμ΄μ¤μ— μƒλ‹Ήν λ§μ€ `default` λ©”μ„λ“λ¥Ό μ¶”κ°€ν–κ³ , κ·Έ κ²°κ³Ό κΈ°μ΅΄μ— μ§μ—¬μ§„ μ λ§μ€ μλ°”μ½”λ“λ“¤μ΄ 
μν–¥μ„ λ°›κ² λμ—λ‹¤. μ–Έμ  μ–΄λ””μ„ λ¬Έμ κ°€ ν„°μ§μ§€ μμΈ΅μ΄ λ¶κ°€λ¥ν•λ‹¤.

<br>

## π” default λ©”μ„λ“λ¥Ό μ‹ μ¤‘ν•κ² μ‚¬μ©ν•΄λΌ
`default` λ©”μ„λ“λ” μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό μ„¤κ³„ν•  λ• ν‘μ¤€μ μΈ λ©”μ„λ“ κµ¬ν„μ„ μ κ³µν•λ”λ° μ•„μ£Ό μ μ©ν• μλ‹¨μ΄λ©°, 
μΈν„°νμ΄μ¤λ¥Ό λ” μ‰½κ² κµ¬ν„ν•΄ ν™μ©ν•  μ μκ²λ” ν•΄μ¤€λ‹¤.  
  
κ·Έλ¬λ‚! `default` λ©”μ„λ“λ” μΈν„°νμ΄μ¤λ΅λ¶€ν„° λ©”μ„λ“λ¥Ό μ κ±°ν•κ±°λ‚ κΈ°μ΅΄ λ©”μ„λ“μ μ‹κ·Έλ‹μ²λ¥Ό μμ •ν•λ” μ©λ„κ°€ μ•„λ‹μ„ λ…μ‹¬ν•μ. 
λν• κΈ°μ΅΄ μΈν„°νμ΄μ¤μ— `default` λ©”μ„λ“λ΅ μƒ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ” μΌμ€ κΌ­ ν•„μ”ν• κ²½μ°κ°€ μ•„λ‹λΌλ©΄ ν”Όν•΄μ•Ό ν•λ‹¤.  

<br>

## ν•µμ‹¬ μ •λ¦¬
μΈν„°νμ΄μ¤ μ„¤κ³„μ—λ” μ„Έμ‹¬ν• μ£Όμλ¥Ό κΈ°μΈμ—¬μ•Ό ν•λ‹¤. μλ»λ μΈν„°νμ΄μ¤ μ„¤κ³„ λ° μμ •μΌλ΅ μ»¤λ‹¤λ€ μ¬μ•™μ΄ μƒκΈ΄λ‹¤. 
μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό λ¦΄λ¦¬μ¦ ν•  κ³„νμ΄λΌλ©΄ μ² μ €ν• ν…μ¤νΈλ¥Ό κ±°μ³μ•Ό ν•λ‹¤. μ„λ΅ λ‹¤λ¥Έ λ°©μ‹μΌλ΅ μµμ† 3κ°€μ§€λ” κµ¬ν„ν•΄λ΄μ•Ό ν•λ©°, 
μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ ν™μ©ν•λ” ν΄λΌμ΄μ–ΈνΈλ¥Ό μ—¬λ¬ κ° λ§λ“¤μ–΄λ΄μ•Ό ν•λ‹¤. μΈν„°νμ΄μ¤λ¥Ό λ¦΄λ¦¬μ¦ ν• ν›„μ— κ²°ν•¨μ„ μμ •ν•λ”κ² κ°€λ¥ν•κΈ΄ ν•μ§€λ§, 
**μ λ€λ΅ κ·Έ κ°€λ¥μ„±μ— κΈ°λ€μ„λ” μ• λλ‹¤.**